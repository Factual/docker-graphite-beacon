{
  "graphite_url": "http://graphite.prod.factual.com:31900",
  "smtp": {
    "from": "graphite-alert@factual.com",
    "to": ["ainsley@factual.com", "molly@factual.com"],
    "host": "smtp.prod.factual.com"
  },
  "alerts": [
    // Node Counts
    {   
      "name": "Hadoop ActiveNodes are failing",
      "format": "short",
      "query": "divideSeries(stats.gauges.yarn.prod.metrics.activeNodes, stats.gauges.yarn.prod.metrics.totalNodes)",
      "rules": ["critical: < historical * 0.8", "warning: < historical * 0.9"]
    },
    {   
      "name": "Hadoop data nodes are failing",
      "format": "short",
      "query": "divideSeries(stats.gauges.yarn.prod.jmx.prod.nameNodes.NumLiveDataNodes, sumSeries(stats.gauges.yarn.prod.jmx.prod.nameNodes.NumLiveDataNodes, stats.gauges.yarn.prod.jmx.prod.nameNodes.NumDeadDataNodes))",
      "rules": ["critical: < historical * 0.8", "warning: < historical * 0.9"]
    },
    {   
      "name": "HBase RegionServers are failing",
      "format": "short",
      "query": "sumSeries(stats.gauges.yarn.prod.jmx.prod.hbase.LIVE.*.count)",
      "rules": ["critical: <= historical * 0.95"]
    },

    // Service 200 checks
    {   
      "name": "NameNode Prod hp11 unreachable",
      "source": "url",
      "query": "http://hp11.la.prod.factual.com:50070/jmx",
      "rules": ["critical: != 200"]
    },
    {   
      "name": "NameNode Prod hp12 unreachable",
      "source": "url",
      "query": "http://hp12.la.prod.factual.com:50070/jmx",
      "rules": ["critical: != 200"]
    },
    {   
      "name": "NameNode Dev hp13 unreachable",
      "source": "url",
      "query": "http://hp13.la.prod.factual.com:50070/jmx",
      "rules": ["critical: != 200"]
    },
    {   
      "name": "NameNode Dev hp14 unreachable",
      "source": "url",
      "query": "http://hp14.la.prod.factual.com:50070/jmx",
      "rules": ["critical: != 200"]
    },
    {   
      "name": "Jobhistory unreachable",
      "source": "url",
      "query": "http://jobtracker-dev.la.prod.factual.com:19888/jobhistory",
      "rules": ["critical: != 200"]
    },
    {   
      "name": "Jobtracker unreachable",
      "source": "url",
      "query": "http://jobtracker-dev.la.prod.factual.com:8088/cluster",
      "rules": ["critical: != 200"]
    },
    {   
      "name": "Hbase Master unreachable",
      "source": "url",
      "query": "http://hp11.la.prod.factual.com:60010/jmx",
      "rules": ["critical: != 200"]
    }
  ]
}
